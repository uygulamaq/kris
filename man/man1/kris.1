.\"
.\" Generated by predoc at 2025-12-18T20:02:26Z
.\"
.Dd December 19, 2025
.Dt KRIS 1
.Os Kris DEVEL
.
.Sh NAME
.Nm kris
.Nd cross-compile Janet projects for multiple platforms using Zig
.
.Sh SYNOPSIS
.Nm
.Cm clean
.Pp
.Nm
.Cm janet
.Oo
.Fl o
.Ar path No \&|
.Fl "-output"
.Ar path
.Oc
.Oo
.Fl s No \&|
.Fl "-small"
.Oc
.Oo
.Fl t
.Ar target No \&|
.Fl "-target"
.Ar target
.Oc
.Oo
.Fl v
.Ar version No \&|
.Fl "-version"
.Ar version
.Oc
.Pp
.Nm
.Cm quickbin
.Oo
.Fl s No \&|
.Fl "-small"
.Oc
.Oo
.Fl t
.Ar target No \&|
.Fl "-target"
.Ar target
.Oc
.Oo
.Fl v
.Ar version No \&|
.Fl "-version"
.Ar version
.Oc
.Ar script
.Ar exe
.
.Sh DESCRIPTION
.Nm
is a command-line tool for cross-compiling Janet projects to
native executables for multiple platforms using Zig.
It exposes its functionality via three commands:
.Pp
.Bl -bullet -offset 3n -compact
.It
.Cm c ,
.Cm clean :
deletes the cache directory
.It
.Cm j ,
.Cm janet :
cross-compiles Janet
.It
.Cm q ,
.Cm quickbin :
cross-compiles a standalone executable
.El
.Pp
There is no default command.
.Pp
.Nm
depends upon
.Xr make 1
and
.Xr zig 1
for compilation and cross-compilation.
They must be on the
.Ev PATH
of the user that runs
.Nm .
.Pp
.Nm
caches Janet source code and build artifacts to speed up subsequent
compilations.
The cache is stored in
.Eo
.Pa $XDG_CACHE_HOME/kris
.Ec
(falls back to
.Eo
.Pa ~/.cache/kris
.Ec
if
.Ev $XDG_CACHE_HOME
is not set).
.
.Ss Options
For
.Nm
.Cm janet ,
the following options are available:
.Bl -tag -width Ds
.It Xo
.Fl o
.Ar path No \&|
.Fl "-output"
.Ar path
.Xc
The output path for the compiled binary.
This defaults to
.Ql "janet" .
.It Xo
.Fl s No \&|
.Fl "-small"
.Xc
Optimise for smallest binary size.
.It Xo
.Fl t
.Ar target No \&|
.Fl "-target"
.Ar target
.Xc
The target platform.
Valid targets are:
.Ql "linux-arm64" ,
.Ql "linux-x64" ,
.Ql "macos-arm64" ,
.Ql "macos-x64" ,
.Ql "native" ,
.Ql "windows-arm64"
and
.Ql "windows-x64" .
This defaults to
.Ql "native"
(your current platform).
.It Xo
.Fl v
.Ar version No \&|
.Fl "-version"
.Ar version
.Xc
The Janet version to build.
This defaults to
.Ql "latest"
(the most recent release from the Janet repository).
.El
.Pp
For
.Nm
.Cm quickbin ,
the following options are available:
.Bl -tag -width Ds
.It Xo
.Fl s No \&|
.Fl "-small"
.Xc
Optimise for smallest binary size.
.It Xo
.Fl t
.Ar target No \&|
.Fl "-target"
.Ar target
.Xc
The target platform.
Valid targets are:
.Ql "linux-arm64" ,
.Ql "linux-x64" ,
.Ql "macos-arm64" ,
.Ql "macos-x64" ,
.Ql "native" ,
.Ql "windows-arm64"
and
.Ql "windows-x64" .
This defaults to
.Ql "native"
(your current platform).
.It Xo
.Fl v
.Ar version No \&|
.Fl "-version"
.Ar version
.Xc
The Janet version to use for the runtime.
This defaults to
.Ql "latest"
(the most recent release from the Janet repository).
.El
.
.Sh EXIT STATUS
.Nm
exits
.Ql "0"
if exiting without error.
Otherwise the exit status will be
.Ql "1" .
.
.Sh FILES
.Bl -tag -width Ds -compact
.It Xo
.Eo
.Pa $XDG_CACHE_HOME/kris
.Ec
.Xc
Cache directory for Janet source code and build artifacts.
If
.Ev $XDG_CACHE_HOME
is not set,
defaults to
.Eo
.Pa ~/.cache/kris
.Ec .
.El
.
.Sh EXAMPLES
Cross-compile Janet for Linux x86-64:
.Bd -literal -offset indent
$ kris janet --target linux-x64
.Ed
.Pp
Cross-compile Janet version 1.40.1 for macOS ARM64 with optimised
size:
.Bd -literal -offset indent
$ kris janet --target macos-arm64 --version 1\&.40\&.1 --small
.Ed
.Pp
Create a standalone executable from a Janet script for your current
platform:
.Bd -literal -offset indent
$ kris quickbin script\&.janet my-app
.Ed
.Pp
Create a standalone executable for Windows x86-64:
.Bd -literal -offset indent
$ kris quickbin --target windows-x64 script\&.janet my-app\&.exe
.Ed
.Pp
Clean the cache directory:
.Bd -literal -offset indent
$ kris clean
.Ed
.
.Sh AUTHORS
.An Michael Camilleri Aq Mt mike@inqk.net
.
.Sh BUGS
Report issues at
.Lk https://github.com/pyrmont/kris .
